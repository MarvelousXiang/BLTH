## 完整更新日志
>### 5.6.4.7
>1.修复打卡弹幕出错时卡死的bug。2.修正部分内置说明的文字表述。3.修复无法上传天选时刻附加信息的bug。若获取到的天选时刻附加信息带有script标签则舍弃。4.修复金额识别无法识别单个“两”的bug。
>### 5.6.4.6
>1.修复多选框设置显示错误的bug。2.自适应时区，修复非东八区地区任务执行时间不正确的bug。3.完善内置说明。4.修复隐藏控制面板时提示信息也会隐藏的bug。5.修复给部分短号直播间(1001-10000)发弹幕无效的bug。
>### 5.6.4.5
>1.延长点击购买勋章并参加按钮后，购买与参加之间的间隔时间。2.点击购买勋章并参加按钮后增加天选是否已结束的判断。3.样式优化。4.运行效率优化。5.控制台日志美化。6.新功能：每日任务 - 硬币换银瓜子。7.修复自动送礼不按时运行的bug。8.修复天选时刻附加信息在点击【保存所有设置】后变为undefined的bug。9.添加隐藏/显示提示信息选项。10.出于性能和其它原因，控制面板和日志窗口不再在浏览器窗口拉伸时保持相对位置不变。11.优化任务加载方式和错误修复机制。12.自动送礼新设置项：允许被送出的礼物类型。可指定想要送出的礼物类型，支持识别礼物名或礼物id。13.方糖推送改用http。原因见官博https://weibo.com/1088413295/JDqyatOic。14.重新加入赠送小心心点亮勋章的功能。
>### 5.6.4.4
>1.修复播放器进入全屏/退出全屏时产生的一些小问题。2.修复点击【取关该分组内的UP主】后出错的bug。3.修复定时休眠的bug。
>### 5.6.4.3
>1.修复在`从直播间获取天选数据`模式下休眠后无法唤醒的bug。2.修复点击保存后无法保存且关闭面板再打开不显示数据的bug。3.修复自动发弹幕的bug。4.一些细微调整，如脚本加载时间改为在DOM树加载完成时。
>### 5.6.4.2
>1.更新一个新q群 2.调整脚本头部元数据位置
>### 5.6.4.1
>1.优化脚本控制面板的样式 2.修复部分情况下脚本无法加载的bug
>### 5.6.4
>1.扩充天选时刻默认忽略关键字 2.天选时刻金额识别优化 3.天选时刻新增忽略直播间功能 4.修复天选时刻休眠无效的bug 5.内容屏蔽新增两项 6.右侧关注和弹窗，下方广告 7.新增更新提示开关 8.新增打卡弹幕发送间隔设置 9.新增天选时刻附加信息 10.窗口大小改变时脚本窗口位置会随之改变，并保持相对位置不变 11.天选时刻数据推送新增额外信息 12.天选时刻检查到缺少粉丝牌的天选时可快捷购买并参加 13.样式上的一些小改进 14.新增eula 15.部分重构，减少不必要的请求，完善错误处理，运行效率和代码格式优化 16.新增忽略非现金抽奖的天选 17.改为通过GM函数获取所需资源。
>### 5.6.3.3
>修复无法参加天选的bug；修复配置导入无效的bug。
>### 5.6.3.2
>【粉丝勋章打卡弹幕】弹幕选取逻辑调整；bug fix。
>### 5.6.3 - 5.6.3.1
>新增两种能识别的天选时刻种类；直播画面全屏后自动关闭面板；修复移动分组等网络请求被风控使脚本停止运行的问题；新增控制台日志选项；若启用需创分组的功能则不创建；新选项：不参与加密直播间的天选；优化了请求失败后再次尝试发起请求的逻辑。
>### 5.6.2
>修复获取小心心功能。修复重复参加pk大乱斗的bug。移除HackTimer库。  
>### 5.6 - 5.6.1
>补充内置说明；解决了浏览器标签页后台时计时器变慢的问题；新增天选时刻开奖倒计时和【立刻参加】按钮；修复了隐身入场无效的bug；新增打卡弹幕黑白名单功能；新增导入和导出脚本配置的功能；新增定时休眠功能（仅对天选和检查小时榜生效）；新增天选时刻中奖弹幕功能；默认关闭控制台日志；【天选时刻】上传至直播间简介的数据格式调整；【天选时刻】中奖后把发起抽奖的UP移到新分组；bug fix。
>### 5.5.2
>补全了内置说明；【天选时刻】【忽略金额小于__元的天选】优化，识别以十开头的中文数字时不再出错；修复开启【隐身入场】会导致脚本无法加载的bug，并做了兼容性处理防止以后有类似情况发生；细节上的改进，修改了部分样式，动画和文字表述。  
>### 5.5.1
>【天选时刻】【忽略金额小于__元的天选】重构升级，能够识别更多种类的奖品名。修复忽略关键字数量，参与抽奖次数显示不正确的bug。  
>### 5.5
>【屏蔽挂机检测】优化，每隔一段时间触发一次鼠标移动事件。【天选时刻】【忽略金额小于__元的天选】优化，支持识别汉字数字，提高识别率。修复方糖SCKEY在保存设置后消失的bug；当浏览器窗口有横向滚动条时脚本控制面板和日志窗口不再错位；新功能：粉丝勋章打卡弹幕；今日统计改为统计天选和实物抽奖参与次数。  
>### 5.4 - 5.4.1
>【屏蔽挂机检测】优化，改为函数劫持方式；方糖SCKEY编辑方式优化；新功能：忽略金额小于__元的天选；支持参加有粉丝勋章和大航海要求的天选；修复天选时刻中奖后不添加白名单，自动取关白名单内UP的bug；不再自动取关，移动一开始在默认分组内的UP；新增内置帮助信息（目前只完成了一条）。  
>### 5.3 - 5.3.1
>新增【把参与天选时关注的UP移到新分组】【取关该分组内的UP主】，中奖后【把发起抽奖的UP加入白名单】；修复取关时若等待回复会取关得非常慢的问题；修复取关不在白名单内UP时把所有关注的UP全取关的bug；方糖推送显示获奖账号。  
>### 5.2.4.1
>修改天选时刻上传数据格式，防止出现`您所填写的简介可能涉及不符合相关法律法规和政策的内容，请修改`的情况。  
>### 5.2.4
>自动投币支持多UID；天选/实物中奖后浏览器提示；白名单编辑；新增【再次执行主站任务】按钮（位于其它设置中）；代码优化。  
>### 5.2.3.4
>修复方糖推送没有正文的问题。  
>### 5.2.3.3
>修复方糖推送失败的问题。  
>### 5.2.3.2
>修复自动投币循环检查UP前30个的视频的bug；修复自动送礼【优先送礼房间】的顺序会在送礼后颠倒的bug；优化天选时刻获取粉丝勋章信息的方法，提高效率。  
>### 5.2.3.1
>自动发弹幕功能优化。  
>### 5.2.3
>新功能：检测到中奖后给发起抽奖的UP发一条私信；点击【取关不在白名单内的UP主】后会有确认窗口；修复【检测到未中奖后自动取关发起抽奖的UP】不生效的bug；添加【隐身入场】的设置；添加【关于】按钮，移除底部链接。  
>### 5.2.2
>【检测到未中奖后自动取关发起抽奖的UP】不会取关在白名单中的UP。  
>### 5.2.1
>从个人简介获取天选数据时能显示所获取数据的最后上传时间（上传者必须使用新版脚本，否则脚本会认为数据格式有误）；修复一些bug。  
>### 5.2
>不再使用GM函数GM_addStyle；日志窗口滚动优化：如果日志按钮旁边有🚀图标，点击即可滚动到底部；滚动到底部后会在新日志出现时自动滚动；新功能：检测到未中奖后自动取关发起抽奖的UP，上传天选数据至直播间个人简介，从个人简介获取天选数据，隐身入场。各小时榜/分区检查优化。    
>### 5.1
>新功能：实物/天选中奖后通过方糖推送通知；忽略关键字编辑方式优化；新增按钮点击特效；实物/天选参与抽奖后会追踪获奖情况，若中奖则在日志区域显示金色日志，通过方糖推送通知（如果开启），并在日志右上角显示小红点；修复自动投币的一些bug；各种运行效率上的优化。  
>### 5.0.2
>修复小心心模块的token获取问题；修复了单选框设置保存无效的bug；天选时刻：现在可以参加拥有符合要求粉丝勋章的天选了；取关时也会等待回复。  
>### 5.0.1
>天选时刻模块bug修复和优化。  
>### 5.0
>新增自动参加天选时刻的功能。  
>### 4.5.2.1
>代码优化；修复了控制面板和日志窗口可以被拉伸的bug。  
>### 4.5.2
>金宝箱抽奖优化，解决了刷新页面导致等待参加的抽奖被舍弃的问题；金宝箱抽奖【忽略关键字】支持正则表达式；新增金宝箱抽奖【每次检查抽奖数量】设置；金宝箱抽奖日志优化；重复运行检测优化；删除一个无关请求`BAPI.live_user.get_info_in_room`。  
>### 4.5.1
>金宝箱抽奖新增忽略关键字功能；UI细节优化；金宝箱抽奖日志优化。   
>### 4.5
>界面优化；新增实物抽奖功能。  
>### 4.4.2.4
>小心心模块，直播签到优化。  
>### 4.4.2.1 - 4.4.2.3
>修复版本更新导致的变量类型错误。   
>### 4.4.2
>尝试修复送礼失败的bug；优化了自动投币的检测机制（只投了一个币的视频应该再投一个币）；优化了隐藏/显示脚本提示时聊天栏信息的滚动；修复了获取完所有小心心后不停止运行的bug；修复每日任务可能不运行的bug。  
>### 4.4.1.2
>修复弹幕发送异常的问题（如果是短号要先转成长号）；修复应援团签到bug；修复了不抽奖也会模拟进入房间的bug。  
>### 4.4.1.1
>尝试解决加载不出控制面板的问题；改变了layer.css的加载方式。  
>### 4.4.1
>新增自动发定时弹幕功能；调整了弹幕设置-发送时间的填写方法；修复检查小时榜间隔时间无法修改的bug；删除了领银瓜子宝箱的相关代码。  
>### 4.4
>新增自动发弹幕功能；代码细节优化。  
>### 4.3
>通过发送心跳包的方式获取小心心；添加屏蔽挂机检测功能；删除了之前的移动端心跳功能；其它细节上的优化。  
>### 4.2.2
>增加新选项【立刻点亮勋章】；小心心模块优化。  
>### 4.2.2
>增加新选项（参与抽奖，检查小时榜）；剩余礼物UID改为自动获取；窗口UI细节改进。  
>### 4.2.1.2
>修改layer.js使其不主动加载css，避免发出错误请求；自动送礼优化和bug修复；修复因同一天过期的小心心不在一组，小心心模块不停止运行的bug。    
>### 4.2.1.1
>修复自动送礼送剩余礼物异常的bug。  
>### 4.2.1
>修复自动送礼不送小心心的bug；增加购买勋章输入错误提示。    
>### 4.2
>控制面板美化；对火狐做了些兼容性调整；运行效率优化；修复挂小心心失效的问题；通过更加规范的方式引入库文件（jsDelivr GitHub commit-specific references）。  
>### 4.1.4.1
>上个版本调试完没隐藏小心心窗口，尴尬。赶紧修复。    
>### 4.1.4
>再次修复挂小心心失效的问题。（若直接拦截获取直播流的fetch请求，则每个窗口只能获取一个小心心。）    
>### 4.1.3
>修复因b站更新导致的挂小心心失效的问题。  
>### 4.1.2
>修复拦截直播流失效的问题；拦截直播流不再拦截当前所在观看的直播。  
>### 4.1.1
>bug fix：1. 拦截直播流误伤其它脚本请求 2.移除活动入口失效 3.小心心获取完后未关闭iframe层窗口  
>### 4.1.1
>bug fix：1. 拦截直播流误伤其它脚本请求 2.移除活动入口失效 3.小心心获取完后未关闭iframe层窗口  
>### 4.1
>获取小心心方式改为打开隐形窗口，效率更高更稳定；新增拦截直播流功能，建议与获取小心心配套使用；新增购买勋章功能  
>### 4.0.3
>修复在弱网条件下脚本窗口无法加载的问题；修复特殊情况下部分每日任务不运行的问题。  
>### 4.0.2
>隐藏窗口和提示信息bug fix  
>### 4.0.1
>界面微调；修复在特殊直播间（如14917277）一直提示无配置信息的bug。新功能：脚本会记录用户是否隐藏了窗口和提示信息，下次运行脚本时（包括刷新网页）会根据记录的设置显示/隐藏窗口和提示信息。  
>### 4.0
>改名；尝试修复自动送礼的一个bug。 
>### 3.9.1.2
>【小心心】修复标签页计数bug。  
>### 3.9.1.1
>优化小心心模块：优化小心心上限的检测；不重复打开已打开的标签页；关闭（或刷新）脚本运行的直播间后由脚本打开的标签页会被关闭。
>领银瓜子宝箱验证码错误后延时150毫秒再尝试，降低风控概率。    
>### 3.9.1
>增加输入项【打开标签页数量上限】防止一下开太多导致浏览器崩溃；增加今日小心心是否全部获取的判定，全部获取后关闭标签页。  
>### 3.9
>改为使用后台打开标签页的方式获取小心心；修复点亮勋章和自动送礼的一些小bug。  
>### 3.8.2
>新功能：【间隔__分钟送礼】，【点亮勋章时忽略亲密度上限】。送礼和点亮算法优化。  
>### 3.8.1
>送礼算法优化；在获取完所有小心心之前直播间不刷新；pc心跳bug修复。  
>### 3.8
>小心心无需通过跳转房间获得，脚本会直接发心跳包。尝试修复暴力猴无法使用的bug。自动点亮勋章算法优化。    
>### 3.7.3
>支持点亮指定勋章，提供了白名单和黑名单两种点亮策略。移动端token缓存，若token不过期则不会获取，降低登陆频率。  
>### 3.7.2.1
>提高获取礼物数据的兼容性，即使失败也能加载备用数据。（顺便测试下webhook）  
>### 3.7.2
>继续尝试修复自动投币在硬币不足时会出错的bug；礼物到期时间单位由秒改为天；新增提示功能。  
>（修复b站api变化导致的自动送礼的bug，然后我刚一修好，b站api又改回去了，白忙活。。。）  
>### 3.7.1
>尝试修复自动投币在硬币不足时会出错的bug；修复自动跳转房间重复跳转的bug；新增内容屏蔽设置。  
>### 3.7
>新增小心心模块：可以自动查找勋章列表中正在直播的房间进行跳转获取小心心，检测到当前房间停播后会再次查找。  
>### 3.6.2
>bug fix；送礼排除礼物策略由黑名单改为白名单。  
>### 3.6.1
>增加送礼排除直播间的功能；优化隐藏抽奖信息功能，现在隐藏抽奖信息时会产生不可见的抽奖信息，点击显示即可看到（旧版隐藏时不会记录抽奖信息）；bug fix  
>### 3.6
>取消了模拟进入房间概率，改为记录进入过的房间号（上限100）。若发现进入过了则不会重复进入。修复了自动投币会给UP不是指定UID用户的联合投稿视频投币的bug。修复多次获取APPToken的bug。修复回车保存无效的bug。应援团签到时间改为第二天8点。  
>### 3.5.5
>修复检查小时榜分区的bug。投币设置选项优化。支持输入框回车保存。  
>### 3.5.4.1
>修复节奏风暴，移动端心跳的一些bug。  
>### 3.5.4
>自动投币可指定给某用户的视频投币。  
>### 3.5.3
>修复火狐特有的一个关于正则表达式的bug。现在支持火狐啦~  
>### 3.5.2
>现在可以检查所有分区的小时榜，能参与的抽奖数量大幅增加。  
>### 3.5.1
>修复读取统计错误的bug；修复开启不抽奖时段不刷新直播间后导致的不会刷新页面的bug；尝试修复多次调用info接口导致大会员被封的问题；不再使用GM_getValue和GM_setValue两个GM函数。  
>### 3.5
>新增节奏风暴抽奖功能；由于设置太多，现在界面可以上下滚动。重置统计时间更精准，误差在1秒内。  
>### 3.4
>支持模拟移动端心跳，领双端观看直播奖励。  
>### 3.3
>增加剩余礼物送礼功能。修复了包裹内无可送礼物时送礼导致的bug。聊天区提示及控制台日志优化。  
>### 3.2.1
>活跃弹幕池修改；领银瓜子宝箱初始化时间滞后；部分输入支持浮点数  
>### 3.2  
>运行日志优化，显示时间；定时送礼模块算法优化，更加精确，增加手动立刻送礼功能；再次执行每日任务，重置统计，不会刷新页面；bug fix  
>### 3.1.1  
>bug fix  
>### 3.1  
>支持自定义送礼时间，取消送礼检查间隔选项。脚本会在指定的一分钟内集中送礼。  
>### 3.0.1  
>补充脚本内说明;界面调整;更新源换为jsdelivr。 
>### 3.0  
>增加自动送礼功能;界面调整，增加脚本内简要说明。
>### 2.6.1  
>修复检查小时榜的bug
>### 2.6  
>银瓜子宝箱验证码识别模块优化，提高验证码识别准确率；修复点击显示/隐藏按钮后聊天信息滚动问题；脚本内置检查更新源换为github;支持自定义检查小时榜间隔
>### 2.5.7  
>移除不必要的页面元素，防止遮挡按钮;细节调整
>### 2.5.6  
>日常修bug，解决了动态中无视频时分享视频引起的错误；界面微调。
>### 2.5.5  
>修复一些bug；运行日志更加详细；优化了重复运行检测，减少性能消耗。  
>### 2.5.4  
>考虑到有时候油猴检查更新功能会失效，增加检查脚本更新的按钮  
>### 2.5.3  
>解决了禁止重复运行方面的bug；转移脚本到GitHub  
>### 2.5.2  
>界面调整：保存按钮变为全局，重新加入重置统计按钮  
>### 2.5.1  
>增加银瓜子换硬币功能;界面细节优化。  
>### 2.3 - 2.5
>日志丢失  
>### 2.2  
>加入选项：进黑屋后强制重复抽奖直到成功，最多重试5次(危险)；CACHE优化  
>### 2.1.3  
>重复运行检测，在一个直播间启用脚本后打开其它直播间不会运行此脚本。  
>### 2.1.2  
>播放器为flash时不自动切换为html播放器  
>### 2.1.1  
>应援团签到细节优化  
>### 2.1  
>增加自动应援团签到功能;修复了SC会遮挡弹幕区上方按钮的bug;活跃弹幕池修改,去除无意义的句号和空格改为表情;限制活跃弹幕发送概率必须小于5%  
>### 2.0.2  
>API源调整,为之后更新做准备  
>### 2.0  
>新功能:抽奖前有概率在目标房间发送一条活跃弹幕(概率别调太高，b站限制每秒只能发一条弹幕);jQuery换源，用BilibiliAPI_Mod(自制API，已压缩)代替原SeaLoogn大佬的BilibiliAPI,包含更多B站API及函数(已压缩，加载更快);本脚本也已压缩，提高载入速度;修复部分时段不抽奖输入框写入非常规时间段时脚本无法正确执行的bug，并增加分钟选项，更加精确(3分钟一检测，所以实际会有一点误差);细节上的改进;  
>### 1.8  
>每次抽奖前抽奖模拟一次进入直播间的动作，防检测(所以会产生很多观看历史记录);重新加入亲密度统计(暂时没用);加入银瓜子统计;优化辣条上限检测方法。  
>### 1.7.2  
>现在上船奖励变为辣条，不再统计亲密度;再次优化了抽奖信息滚动。  
>### 1.7.1  
>解决了弹幕聊天记录和抽奖信息滚动异常的问题;修复了一个按钮的css样式;添加一个脚本图标(辣条)。  
>### 1.7  
>礼物信息保存到浏览器缓存，出现重复领取的现象大大降低。修复了开启延时会无法抽奖的bug。  
>### 1.6  
>更新css样式,窗口更好看了。  
>### 1.5.3  
>随机延迟算法优化：随机延时包括最大和最小值;最大最小值相同时延时固定。    
>### 1.0 - 1.5.2
>创建脚本，一些细节上的改动。  